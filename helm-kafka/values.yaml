# Default values for onix-kafka
# This is a YAML-formatted file.

# Application configuration
appName: onix-ev-charging
component: bap  # bap or bpp

# Image configuration
image:
  repository: manendrapalsingh/onix-adapter
  tag: v0.9.3
  pullPolicy: IfNotPresent

# Replica count
replicaCount: 1

# Service configuration
service:
  type: ClusterIP
  port: 8001
  targetPort: 8001

# Kafka configuration (KRaft mode - no Zookeeper)
kafka:
  enabled: true
  # Kafka broker address - if not set, defaults to <release-name>-onix-kafka-kafka:<port>
  # Set this if you want to use a different Kafka service name or external Kafka
  broker: ""  # If empty, will default based on kafka.enabled and release name
  image:
    repository: confluentinc/cp-kafka
    tag: "7.5.0"
  brokerId: 1
  processRoles: "broker,controller"
  service:
    port: 9092
    targetPort: 9092
    controllerPort: 9093
  resources:
    requests:
      memory: "512Mi"
      cpu: "500m"
    limits:
      memory: "1Gi"
      cpu: "1000m"
  persistence:
    enabled: false
    size: 20Gi
    storageClass: ""

# KRaft (Kafka Raft) configuration - Zookeeper not needed
kraft:
  enabled: true
  nodeId: 1
  clusterId: MkU3OEVBNTcwNTJENDM2Qk
  # controllerQuorumVoters will be set dynamically in template using service name

# Redis configuration
redis:
  enabled: true
  # Hostname for Redis service - if not set, defaults to <release-name>-onix-kafka-redis-<component>
  # This is used in the adapter configuration
  # Set this if you want to use a different Redis service name or external Redis
  host: ""  # If empty, will default to <release-name>-onix-kafka-redis-<component>
  password: "your-redis-password"  # Redis password matching sandbox-kafka
  image:
    repository: redis
    tag: alpine
  service:
    port: 6379
    targetPort: 6379
  persistence:
    enabled: false
    size: 10Gi
    storageClass: ""
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  healthcheck:
    enabled: true
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    successThreshold: 1
    failureThreshold: 5

# Kafka UI configuration
kafkaUI:
  enabled: false  # Enable in values-bap.yaml
  image:
    repository: provectuslabs/kafka-ui
    tag: latest
  service:
    type: ClusterIP
    port: 8080


# Application resources
resources:
  requests:
    memory: "512Mi"
    cpu: "500m"
  limits:
    memory: "1Gi"
    cpu: "1000m"

# Environment variables
env: []
# Note: CONFIG_FILE is set in the deployment template using .Values.component

# Configuration files
# Component-specific configurations (adapter, routing, keys) are defined in:
# - values-bap.yaml (for BAP component)
# - values-bpp.yaml (for BPP component)
config:
  # Keys for fallback when secrets are not enabled (empty in base, values in component-specific files)
  keys:
    signingPrivateKey: ""
    signingPublicKey: ""
    encrPrivateKey: ""
    encrPublicKey: ""

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}

# Pod annotations
podAnnotations: {}

# Service annotations
serviceAnnotations: {}

